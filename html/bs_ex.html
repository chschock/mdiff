<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="http://getbootstrap.com/favicon.ico">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="bs_ex_files/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="bs_ex_files/starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bs_ex_files/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- highlight.js  -->
    <link rel="stylesheet" href="hljs/styles/default.css">
    <script src="hljs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

<!--     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
 -->

    <style>
        .difftext {
            /*float: none;*/
            display: block;
            /*border: 1px solid;*/
            overflow: auto;
            border-left: 1px solid;
        }
        .cls-code {
            /*white-space: nowrap;*/
        }
        .cls-code-nowrap {
            display: inline-block;
        }

        .cls-pre {
            line-height: 1.2em;
        }

        .btn-file {
            position: relative;
            overflow: hidden;
        }
        .btn-file input {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            opacity: 0;
            cursor: inherit;
            display: block;
        }
        .navbar {
            /*display: inline-block;*/
            float: none;
            text-align: center;
            vertical-align: center;
        }
    </style>

  </head>

  <body>

  <div class="container-fluid">
  <div class="row" id="navrow">
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="col-xs-3" >
          <a class="navbar-nav navbar-left navbar-brand" href="#">mDiff</a>
        </div>

        <div class="col-xs-6">
          <div class="navbar-nav navbar">
            <form class="navbar-form">
            <button type="button" class="btn btn-xs btn-primary" id="swap">swap texts</button>
            <div class="btn-group" role="group" aria-label="...">
            <span type="button" class="btn btn-sm btn-primary btn-file">
                <!-- <span class="glyphicon glyphicon-floppy-open" aria-hidden="true"></span> -->
                <span>Load</span><input type="file" id="lfile">
            </span>
            <button type="button" class="btn btn-sm btn-file btn-default" id="lrdiff">
                <span>Update</span>
            </button>
            <span class="btn btn-sm btn-primary btn-file">
                <!-- <span class="glyphicon glyphicon-floppy-open" aria-hidden="true"></span> -->
                <span>Load</span><input type="file" id="rfile">
            </span>
            </div>
            <button type="button" class="btn btn-xs btn-primary" id="shuf">shuffle right</button>
            </form>
          </div>
        </div>

        <div class="col-xs-3">
            <div class="nav navbar-right">
                <form class="navbar-form" role="search">
                    <div class="btn-group btn-group-sm" role="group">
                      <button type="button" id="colorscheme" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span id="color-text">Colors 1</span>
                        <span class="caret"> </span>
                        <span class="sr-only">Toggle Dropdown</span>
                      </button>
                      <ul class="dropdown-menu">
                          <li><a href="#" id="scheme-1">Colors 1</a></li>
                          <li><a href="#" id="scheme-2">Colors 2</a></li>
                          <li><a href="#" id="scheme-3">Colors 3</a></li>
                          <li><a href="#" id="scheme-4">Colors off</a></li>
                      </ul>
                    </div>

                    <div class="btn-group btn-group-sm" role="group">
                      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                      </button>
                      <ul class="dropdown-menu">
                        <li>
                        <div class="input-group input-group-sm" style='width: 1em;'>
                          <span class="input-group-addon" id="basic-addon1">min match</span>
                          <input type="text" class="form-control" value="10" aria-describedby="basic-addon1"
                          style='width: 4em;' onkeyup="this.value=this.value.replace(/[^\d]/,'')" id='minmatch'>
                          <span class="input-group-addon" id="basic-addon1">merge regex</span>
                          <input type="text" class="form-control" value="\s+" aria-describedby="basic-addon1"
                          style='width: 8em;' id='collapse'>
                        </div>
                        </li>
                        <li>
                        <div class="btn-group " role="group">
                            <button type="button" class="btn btn-default" id="wrap" style="width:6em;">wrap text</button>
                            <button type="button" class="btn btn-default active" id="syntax" style="width:6em;">syntax</button>
                            <button type="button" class="btn btn-default" id="go_backend" style="width:7em;">go backend</button>
                        </div>
                        </li>
                      </ul>
                    </div>
                </form>
            </div>
        </div>
    </nav>
  </div>

  <div class="row" id="contentrow">
    <div class="col-xs-6 difftext" id="ldiv">
        <code class="cls-code cls-code-nowrap" id="lcode">
            <span id="lfilename"></span>
            <pre class="cls-pre" contentEditable="true" id="ltext"></pre>
        </code>
    </div>
    <div class="col-xs-6 difftext" id="rdiv">
        <code class="cls-code cls-code-nowrap" id="rcode">
            <span id="rfilename"></span>
            <pre class="cls-pre" contentEditable="true" id="rtext"></pre>
        </code>
    </div>
  </div>

<!--   <div class="row" id="contentrow">
    <div class="col-xs-6 difftext" id="ldiv">
        <span id="lfilename"></span>
        <pre class="cls-pre" >
            <code class="cls-code javascript" contentEditable="true" id="ltext"> </code>
        </pre>
    </div>
    <div class="col-xs-6 difftext" id="rdiv">
        <span id="rfilename"></span>
        <pre class="cls-pre" >
            <code class="cls-code javascript" contentEditable="true" id="rtext"> </code>
        </pre>
    </div>
  </div>
 -->
  </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="bs_ex_files/jquery.js"></script>
    <script src="bs_ex_files/bootstrap.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bs_ex_files/ie10-viewport-bug-workaround.js"></script>

    <script src="../mca.js"></script>
    <script src="../transform.js"></script>
    <script src="handle.js"></script>

    <script>
        $(document).ready( function()
            {
                handleResize();

                var ltext = document.getElementById('ltext')
                var rtext = document.getElementById('rtext')

                var observer = new MutationObserver(function(muts){
                    muts.forEach(function(mut){handleUpdate(); $()});
                });

                var config = {characterData: true, subtree: true};
                observer.observe(ltext, config);
                observer.observe(rtext, config);
            });

        $(window).resize(function() {handleResize();});

        document.getElementById('lfile').addEventListener('change', handleFileSelect, false);
        document.getElementById('rfile').addEventListener('change', handleFileSelect, false);
        document.getElementById('lrdiff').addEventListener('click', handleDiff, false);
        document.getElementById('shuf').addEventListener('click', handleShuf, false);
        document.getElementById('swap').addEventListener('click', handleSwap, false);
        document.getElementById('wrap').addEventListener('click', handleWrap, false);
        document.getElementById('syntax').addEventListener('click', handleSyntax, false);
        document.getElementById('go_backend').addEventListener('click', handleGoBackend, false);

        $('input[type=file]').click( function() {$(this).val('');} );

        document.getElementById('scheme-1').addEventListener('click', function() {handleColorScheme(0)}, false);
        document.getElementById('scheme-2').addEventListener('click', function() {handleColorScheme(1)}, false);
        document.getElementById('scheme-3').addEventListener('click', function() {handleColorScheme(2)}, false);
        document.getElementById('scheme-4').addEventListener('click', function() {handleColorScheme(3)}, false);

        $("#wrap").click(function(e){console.log($('#minmatch').val());});
    </script>
</body></html>